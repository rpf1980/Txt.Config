# LAMP
https://www.youtube.com/watch?v=YggXN_xJKbs

//Comandos para instalar LAMP en ubuntu

  $ sudo apt-get update
  $ sudo apt-get install apache2
  $ sudo ufw status                 // Comprobamos el firewall 
  $ sudo ufw enable                 // Habilitamos el firewall
  $ sudo ufw app list               // Vemos listado de aplicaciones permitidas para ufw
  $ sudo ufw app info Apache Full // Comprobamos que los puertos que usa apache mediante el protocolo TCP/IP están abiertos

  /** Escribimos localhost en nuestro navegador para comprobar que apache server está bien configurado

  $ sudo ufw allow in "Apache Full"  //NOTA*--> Si los puertos estuvieran dehabilitados
  $ sudo apt install mysql-server    // Instalamos el servidor
  $ sudo mysql_secure_installation   // Asistente de seguridad de mysql
	----ponemos NO
	----ponemos Contraseña
	----ponemos SI
	----ponemos SI
	----ponemos SI
	----ponemos SI

  $ sudo mysql -u root -p	     // Accedemos al servidor
  mysql> show databases;	     // Comprobamos conexión pidiéndole ver las db que tiene (en principio son las que viene por defecto)

  $ sudo apt install php libapache2-mod-php php-mysql -y  // Instalamos php
  $ sudo service apache2 restart    // Reseteamos el servicio de apache

  /** Hacemos una prueba para ver si php está bien configurado
  // Nos vamos a /var/www/html  //Aquí es donde tendríamos que ubicar todas nuestros proyectos (páginas web.... etc)
  // Sobre este directorio no tendríamos permisos... así que vamos a dar los permisos necesarios
  $ sudo chown -R $USER:root /var/www  
  // Ahora crearemos en esta ruta /var/www/html un scprit en php para comprobar que funciona
  $ sudo gedit info.php
  // Y escribimos dentro lo siguiente:
	<?php
	phpinfo();
	?>
  // Luego escribimos en nuestro navegador localhost/info.php

  $ sudo apt-get install phpmyadmin     // Instalamos phpmyadmin
	----dejamos tal cual
	----ponemos SI
	----ponemos contraseña (he puesto la misma que mysql)
        ----confirmamos contraseña

  $ sudo gedit /etc/apache2/apache2.conf  // Accedemos al archivo de configuración de apache2 para poder habilitar el servicio 
  y que a la hora de conectarnos nos de servicio (localhost/phpmyadmin en navegador para probar)

  /** Debajo del último Include del archivo ponemos este otro:
  
  # include phpmyadmin file
  Include /etc/phpmyadmin/apache.conf

  $ sudo service apache2 restart   // Reiniciamos apache

  // localhost/phpmyadmin ---> En nuestro navegador

  // CONEXIÓN CON GESTOR HEIDISQL
  
  $ su
  $ mysql 
  MariaDB > CREATE DATABASE nombreBaseDatos;  // Creamos una base de datos

  // Necesitamos gestionar un nuevo usuario
  MariaDB [(none)]> CREATE USER "josuevhn"@"%" IDENTIFIED BY "P@ssw0rd*";
Query OK, 0 rows affected (0.01 sec)

MariaDB [(none)]> use empresa;
Database changed
MariaDB [empresa]> GRANT ALL ON empresa.* TO "josuevhn"@"%";
Query OK, 0 rows affected (0.01 sec)

MariaDB [empresa]> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.02 sec)

MariaDB [empresa]> SELECT User,Host FROM mysql.user;
+----------+-----------+
| User     | Host      |
+----------+-----------+
| root     | 127.0.0.1 |
| root     | ::1       |
| josuevhn | localhost |
| root     | localhost |
+----------+-----------+
4 rows in set (0.00 sec)

	
	// SITUARNOS en nuestra DB

	MariaDB [none] SHOW databases;
	MariaDB [none] USE nombre_base_datos;
	MariaBB [nombre_base_datos] 

	// VER COMPOSICIÓN de nuestra DB

	MariaDB [nombre_base_datos] DESCRIBE nombreColumnaQueSea;


  $ cd /etc/mysql/mariadb.conf.d  // Vamos a este fichero
  $ nano 50-server.conf           // Entramos en este otro
  // Y debemos comentar la línea que contiene bind-address    = 127.0.0.1 y debe quedar así:
  #bind-address   = 127.0.0.1


  /**LISTAR usuarios y sus bases de datos
  mysql> select u.User,Db from mysql.user u,mysql.db d where u.User=d.User;

  /** BORRAR LAMP DEL SISTEMA
  $ sudo apt-get remove lamp-server^

  
----------------000-----------------

# MysqlWorbench
https://www.youtube.com/watch?v=iS7p9NnGwl4

----------------000------------------

# SOLUCIÓN: posible excepción por problemas de conexión en franja horaria

 //Entramos como root en nuestro servidor

 $ sudo myslql -u root -p

 //Establecemos zona horaria

 $ SET GLOBAL time_zone = '+0:00';

----------------000------------------


